{% extends "layout.html" %}
{% block content %}
<div class="card auth-card">
  <h2>log in</h2>
  {% if error %}<div class="error">{{ error }}</div>{% endif %}
  <form method="post" id="login-form">
    <label>Email
      <input type="email" name="email" required />
    </label>
    <label>Password
      <input type="password" name="password" id="login-password" required />
    </label>
    <label class="show-pass">
      <input type="checkbox" id="reveal-login"> show password
    </label>

    <div class="reCAPTCHA">
      {% if site_key %}
      <div class="g-recaptcha" data-sitekey="{{ site_key }}"></div>
      {% else %}
      <input type="hidden" name="g-recaptcha-response" value="JINGS GONNA PUT THIS LATER">
      <small>reCAPTCHA disabled (no site key)</small>
      {% endif %}
    </div>

    <button class="btn">Log in</button>
  </form>

  <p>Don't have an account? <a href="{{ url_for('signup') }}">Create account</a></p>
</div>

<script>
document.getElementById('reveal-login').addEventListener('change', function(){
  const p = document.getElementById('login-password');
  p.type = this.checked ? 'text' : 'password';
});
</script>
{% endblock %}

